<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üéüÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–∞–º–∏</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #f1f3f5;
            padding: 50px;
            text-align: center;
        }
        .card {
            display: inline-block;
            background: white;
            padding: 20px;
            margin: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 250px;
            transition: transform 0.2s ease;
        }
        .card:hover {
            transform: scale(1.03);
        }
        a {
            text-decoration: none;
            color: #2d3436;
        }
        h1 {
            margin-bottom: 40px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #0984e3;
            color: white;
            border-radius: 8px;
            margin-top: 10px;
        }
        .grid {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #0984e3;
            color: white;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .archive-btn {
            padding: 6px 12px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .unarchive-btn {
            padding: 6px 12px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>üéüÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–ª–µ—Ç–∞–º–∏</h1>
    <div class="grid">
        <div class="card">
            <h3>üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –±–∏–ª–µ—Ç</h3>
            <a class="btn" href="/admin/create-ticket">–°–æ–∑–¥–∞—Ç—å –±–∏–ª–µ—Ç</a>
        </div>
        <div class="card">
            <h3>üîç –ü–æ–∏—Å–∫ –±–∏–ª–µ—Ç–∞</h3>
            <a class="btn" href="/admin/search-ticket">–û—Ç–∫—Ä—ã—Ç—å</a>
        </div>
        <div class="card">
            <h3>üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏</h3>
            <a class="btn" href="/admin/winners">–°–ø–∏—Å–æ–∫</a>
        </div>
    </div>

<!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å–µ–∫—Ü–∏—é –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ -->
{% if winner_tickets %}
<h2>üèÜ –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ –±–∏–ª–µ—Ç—ã</h2>
<table>
    <!-- ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ ... -->
</table>
{% endif %}

<!-- –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ö–∏–≤–æ–º -->
<div style="margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h2>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–º</h2>
    
    <div style="display: flex; gap: 15px; margin-top: 15px;">
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ -->
        <form action="/tickets/all/" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ù–ï–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã?')">
            <input type="hidden" name="x_admin_key" value="MySuperSecretKeyForDeleteAll2133">
            <button type="submit" style="background: #dc3545; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer;">
                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–∏–ª–µ—Ç—ã
            </button>
        </form>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∞—Ä—Ö–∏–≤–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ -->
        <form action="/tickets/archived/all/" method="post" onsubmit="return confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –∞—Ä—Ö–∏–≤–Ω—ã–µ –±–∏–ª–µ—Ç—ã –Ω–∞–≤—Å–µ–≥–¥–∞. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')">
            <input type="hidden" name="x_admin_key" value="MySuperSecretKeyForDeleteAll2133">
            <button type="submit" style="background: #ff6b6b; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer;">
                üíÄ –£–¥–∞–ª–∏—Ç—å –í–°–ï –∞—Ä—Ö–∏–≤–Ω—ã–µ –±–∏–ª–µ—Ç—ã
            </button>
        </form>
    </div>

    <p style="margin-top: 15px; color: #666; font-size: 14px;">
        <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:</strong> –£–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. –ê—Ä—Ö–∏–≤–Ω—ã–µ –±–∏–ª–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è—Ö.
    </p>
</div>

<script>
// JavaScript –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
document.addEventListener('DOMContentLoaded', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º —Å –º–µ—Ç–æ–¥–æ–º POST –¥–ª—è DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
    const forms = document.querySelectorAll('form[method="post"]');
    forms.forEach(form => {
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const confirmMessage = this.getAttribute('onsubmit').includes('confirm') ? 
                this.getAttribute('onsubmit').match(/confirm\('([^']+)'/)[1] : 
                '–í—ã —É–≤–µ—Ä–µ–Ω—ã?';
            
            if (!confirm(confirmMessage)) return;
            
            try {
                const formData = new FormData(this);
                const response = await fetch(this.action, {
                    method: 'DELETE',
                    headers: {
                        'X-Admin-Key': formData.get('x_admin_key')
                    }
                });
                
                const result = await response.json();
                alert(result.message || result.detail);
                location.reload();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        });
    });
});
</script>
</body>
</html>